{"version":3,"file":"main.js","sources":["../src/main.ts"],"sourcesContent":["import * as path from \"path\"\r\nimport * as url from \"url\"\r\nimport { app, BrowserWindow, screen } from \"electron\"\r\n// const find_process = require(\"find-process\")\r\n// const { exec } = require(\"child_process\");\r\n\r\n// function killPort(port:number) {\r\n\r\n//     return new Promise((resolve, reject)=>{\r\n\r\n//         find_process(\"port\", port).then((result:any)=>{\r\n//             if (result.length > 0) {\r\n\r\n//                 let pid = result[0].pid\r\n//                 let platform = process.platform\r\n//                 if (platform === \"win32\") exec(`taskkill /F /PID ${pid}`)\r\n//                 else if (platform === \"darwin\") exec(`kill ${pid}`)\r\n//                 else if (platform === \"linux\") exec(`killall ${pid}`)\r\n// \t\t\t\tresolve(`Port ${port} closed`)\r\n\t\t\t\t\r\n//             } else {reject(`Port ${port} already closed `)}\r\n\r\n//         })\r\n//     })\r\n// }\r\n\r\nlet mainWindow: BrowserWindow | null;\r\n\r\nfunction createWindow() {\r\n\r\n\tconst { width, height } = screen.getPrimaryDisplay().workAreaSize;\r\n\tmainWindow = new BrowserWindow({\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\r\n\t\tframe: false,\r\n\t\ttitleBarStyle: \"hidden\",\r\n\t\tbackgroundColor: \"#1f232b\",\r\n\t\t\r\n\t\tshow: false,\r\n\t\twebPreferences: {\r\n\t\t\tnodeIntegration: true,\r\n\t\t\tnativeWindowOpen: true,\r\n\t\t\twebviewTag: true\r\n\t\t}\r\n\t});\r\n\r\n\tmainWindow.loadURL(\r\n\t\turl.format({\r\n\t\t\tpathname: path.join(__dirname, \"../static/index.html\"),\r\n\t\t\tprotocol: \"file:\",\r\n\t\t\tslashes: true\r\n\t\t})\r\n\t);\r\n\r\n\t// Open the DevTools.\r\n\t// mainWindow.openDevTools({ mode: \"detach\" });\r\n\r\n\tmainWindow.once(\"ready-to-show\", () => {\r\n\t\tif (mainWindow!=null){mainWindow.show();}\r\n\t});\r\n\r\n\tmainWindow.on(\"closed\", function() {\r\n\r\n\t\t// killPort(8501).then((result:any)=>console.log(result)).catch((err:any)=>console.log(err))\r\n\t\tmainWindow = null;\r\n\t\t\r\n\t});\r\n\r\n\r\n\tmainWindow.webContents.on('new-window', (event, url, frameName, disposition, options, additionalFeatures) => {\r\n\t\tevent.preventDefault()\r\n\t\t\r\n\t\tObject.assign(options, {\r\n\t\t\tparent: mainWindow,\r\n\t\t\twidth: width*.75,\r\n\t\t\theight: 600,\r\n\t\t\tframe: true,\r\n\t\t})\r\n\r\n\t\tlet newWindow = event.newGuest = new BrowserWindow(options)\r\n\t\tnewWindow.on(\"closed\", ()=>{\r\n\t\t\tconsole.log(\"Window closed\")\r\n\t\t\t// killPort(8501).then((result:any)=>console.log(result)).catch((err:any)=>console.log(err))\r\n\r\n\t\t})\r\n\t  })\r\n}\r\n\r\napp.on(\"ready\", createWindow);\r\n\r\napp.on(\"window-all-closed\", function() {\r\n\r\n\t// Except for macOS\r\n\tif (process.platform !== \"darwin\") {\r\n\t\tapp.quit();\r\n\t}\r\n});\r\n\r\napp.on(\"activate\", function() {\r\n\tif (mainWindow === null) { createWindow() }\r\n});"],"names":["screen","BrowserWindow","url.format","path.join","app"],"mappings":";;;;;;;;;AAGA;;;;;;;;;;;;;;;;AAuBA,IAAI,UAAgC,CAAC;AAErC,SAAS,YAAY;IAEpB,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAGA,eAAM,CAAC,iBAAiB,EAAE,CAAC,YAAY,CAAC;IAClE,UAAU,GAAG,IAAIC,sBAAa,CAAC;QAC9B,KAAK,EAAE,KAAK;QACZ,MAAM,EAAE,MAAM;QAEd,KAAK,EAAE,KAAK;QACZ,aAAa,EAAE,QAAQ;QACvB,eAAe,EAAE,SAAS;QAE1B,IAAI,EAAE,KAAK;QACX,cAAc,EAAE;YACf,eAAe,EAAE,IAAI;YACrB,gBAAgB,EAAE,IAAI;YACtB,UAAU,EAAE,IAAI;SAChB;KACD,CAAC,CAAC;IAEH,UAAU,CAAC,OAAO,CACjBC,UAAU,CAAC;QACV,QAAQ,EAAEC,SAAS,CAAC,SAAS,EAAE,sBAAsB,CAAC;QACtD,QAAQ,EAAE,OAAO;QACjB,OAAO,EAAE,IAAI;KACb,CAAC,CACF,CAAC;;;IAKF,UAAU,CAAC,IAAI,CAAC,eAAe,EAAE;QAChC,IAAI,UAAU,IAAE,IAAI,EAAC;YAAC,UAAU,CAAC,IAAI,EAAE,CAAC;SAAC;KACzC,CAAC,CAAC;IAEH,UAAU,CAAC,EAAE,CAAC,QAAQ,EAAE;;QAGvB,UAAU,GAAG,IAAI,CAAC;KAElB,CAAC,CAAC;IAGH,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,KAAK,EAAE,GAAG,EAAE,SAAS,EAAE,WAAW,EAAE,OAAO,EAAE,kBAAkB;QACvG,KAAK,CAAC,cAAc,EAAE,CAAA;QAEtB,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE;YACtB,MAAM,EAAE,UAAU;YAClB,KAAK,EAAE,KAAK,GAAC,GAAG;YAChB,MAAM,EAAE,GAAG;YACX,KAAK,EAAE,IAAI;SACX,CAAC,CAAA;QAEF,IAAI,SAAS,GAAG,KAAK,CAAC,QAAQ,GAAG,IAAIF,sBAAa,CAAC,OAAO,CAAC,CAAA;QAC3D,SAAS,CAAC,EAAE,CAAC,QAAQ,EAAE;YACtB,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAA;;SAG5B,CAAC,CAAA;KACA,CAAC,CAAA;CACJ;AAEDG,YAAG,CAAC,EAAE,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;AAE9BA,YAAG,CAAC,EAAE,CAAC,mBAAmB,EAAE;;IAG3B,IAAI,OAAO,CAAC,QAAQ,KAAK,QAAQ,EAAE;QAClCA,YAAG,CAAC,IAAI,EAAE,CAAC;KACX;CACD,CAAC,CAAC;AAEHA,YAAG,CAAC,EAAE,CAAC,UAAU,EAAE;IAClB,IAAI,UAAU,KAAK,IAAI,EAAE;QAAE,YAAY,EAAE,CAAA;KAAE;CAC3C,CAAC,CAAC;"}